# Netlify Deployment Plan - Resolving generateStaticParams Error

## Issue Analysis
The Netlify build is failing with the error: "Error: Page "/[locale]/[...rest]" is missing "generateStaticParams()" so it cannot be used with "output: export" config." This occurs because the `output: 'export'` configuration in `next.config.js` requires all dynamic routes, including the catch-all `/[locale]/[...rest]` route, to define a `generateStaticParams` function for static pre-rendering.

## Plan to Resolve

**Step 1: Understand the Error**
The error indicates that the dynamic route `/[locale]/[...rest]` needs a `generateStaticParams` function when using `output: 'export'`. This function specifies which paths should be statically generated for this route.

**Step 2: Locate the `[[...rest]]` Page File**
The file responsible for the `/[locale]/[...rest]` route is likely located at `web/src/app/[locale]/[[...rest]]/page.tsx`.

**Step 3: Add `generateStaticParams` to the Page File**
Add an `async function generateStaticParams()` to the `web/src/app/[locale]/[[...rest]]/page.tsx` file. This function must return an array of objects, where each object contains the `locale` and `rest` parameters for the specific paths you want to statically generate.

Since `[...rest]` is a catch-all, you need to explicitly define the `rest` segments for all the paths you intend this route to handle and be statically generated.

**Note:** Since the application will only support English (`en`), we can simplify the implementation by hardcoding the locale.

Example implementation (replace `pathsToGenerate` with your actual paths):

```typescript
// web/src/app/[locale]/[[...rest]]/page.tsx

// ... existing imports and code ...

export async function generateStaticParams() {
  // Define the 'rest' segments for the paths you want to statically generate
  // Replace these examples with your actual expected paths for the 'en' locale
  const pathsToGenerate = [
    ['example', 'path'], // Corresponds to /en/example/path
    ['another', 'page'], // Corresponds to /en/another/page
    // Add more arrays for other paths you want to generate under /en/
    // If this route should also generate the root /en path, add an empty array: []
  ];

  // Generate parameters only for the 'en' locale and each defined path
  return pathsToGenerate.map((rest) => ({
    locale: 'en',
    rest,
  }));

  // If this route ONLY handles the root /en path and no sub-paths:
  // return [{ locale: 'en' }];

  // If this route handles NO static paths (unlikely for export):
  // return [];
}

// ... rest of your page component code ...
```

**Step 4: Implement the Change**
Manually add the `generateStaticParams` function to your `web/src/app/[locale]/[[...rest]]/page.tsx` file. Define the `pathsToGenerate` array with the actual paths you need to be statically generated by this route.

**Step 5: Commit and Push Changes**
Commit the modified file and push your changes to your GitHub repository.

```bash
git add web/src/app/[locale]/[[...rest]]/page.tsx
git commit -m "Add generateStaticParams to catch-all route for static export"
git push
```

**Step 6: Monitor Netlify Deploy**
A new deploy will be triggered on Netlify. Monitor the build logs to confirm that the `generateStaticParams` error is resolved and the build completes successfully.

**Step 7: Test the Deployed Site**
After the deploy is live, test the specific paths you defined in `generateStaticParams` on your Netlify site (`https://nfs-big-5.netlify.app/[locale]/[...rest]`) to ensure they are working correctly. Also, check the root URL (`https://nfs-big-5.netlify.app/`) to see if the redirect to `/en/` works and if the English homepage is displayed.

**Important Consideration:** For a true catch-all route designed to handle arbitrary dynamic paths, `output: 'export'` might not be the most suitable configuration, as it requires pre-defining all possible paths for static generation. If this route needs to be dynamic, we may need to revert the `output: 'export'` change in `next.config.js` and explore Netlify's serverless function capabilities for dynamic Next.js routes.